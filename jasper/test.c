#include <stdio.h>
#include "portspec.h"

void test(char *spec) {
  struct port_generator *gen;
  unsigned short port;
  int i;
        
  printf("\nTesting '%s'\n", spec);
  gen = parse_ports(spec);
  i = 0;
  while(port = next_port(gen)) {
    printf("% 5d ", port);
    if(++i % 8 == 0) printf("\n");
  }
  if(i % 8) printf("\n");
        
  free(gen);
}

int main(int argc, char **argv) {
  int i;
  printf("Starting port_spec test\n");
        
  test("22");
  test("22,80");
  test("22,80,443,3389");
  test("1-100");
  test("22,135-139,443");
}
